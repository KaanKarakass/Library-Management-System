{"openapi":"3.1.0","info":{"title":"Library Management API","version":"v1"},"servers":[{"url":"http://localhost:8080","description":"Generated server url"}],"security":[{"bearerAuth":[]}],"tags":[{"name":"Borrow History Controller","description":"Borrow management operations"},{"name":"Book Controller","description":"Book management operations"},{"name":"User Controller","description":"User management operations"},{"name":"Auth Controller","description":"Auth management operations"}],"paths":{"/api/users/update/{id}":{"put":{"tags":["User Controller"],"summary":"Update user by ID","description":"Updates user details for a given ID. Checks for uniqueness of username and email before updating.","operationId":"updateUser","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateUserRequest"}},"application/xml":{"schema":{"$ref":"#/components/schemas/UpdateUserRequest"}}},"required":true},"responses":{"200":{"description":"User successfully updated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDTO"}}}},"400":{"description":"Invalid input data","content":{"application/json":{"schema":{"type":"string","example":{"message":"Invalid data"}}}}},"404":{"description":"User not found","content":{"application/json":{"schema":{"type":"string","example":{"message":"User not found"}}}}}}}},"/api/books/update/{id}":{"put":{"tags":["Book Controller"],"summary":"Update an existing book","operationId":"updateBook","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateBookRequest"}},"application/xml":{"schema":{"$ref":"#/components/schemas/UpdateBookRequest"}}},"required":true},"responses":{"200":{"description":"Book successfully updated","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookDTO"}}}},"404":{"description":"Book not found","content":{"application/json":{"schema":{"type":"string","example":{"message":"Book not found"}}}}},"400":{"description":"Invalid request body","content":{"application/json":{"schema":{"type":"string","example":{"message":"Invalid request body"}}}}}}}},"/api/users/register":{"post":{"tags":["User Controller"],"summary":"Register a new user","description":"Registers a new user with provided information like username, email, password, and role.","operationId":"registerUser","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterUserRequest"}},"application/xml":{"schema":{"$ref":"#/components/schemas/RegisterUserRequest"}}},"required":true},"responses":{"200":{"description":"User successfully registered","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDTO"}}}},"400":{"description":"Invalid input data","content":{"application/json":{"schema":{"type":"string","example":{"message":"Invalid data"}}}}}}}},"/api/borrow-history/{historyId}/return":{"post":{"tags":["Borrow History Controller"],"summary":"Return a book","description":"Marks a borrowed book as returned and updates availability","operationId":"returnBook","parameters":[{"name":"historyId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReturnRequestDTO"}},"application/xml":{"schema":{"$ref":"#/components/schemas/ReturnRequestDTO"}}},"required":true},"responses":{"200":{"description":"Book successfully returned","content":{"application/json;charset=UTF-8":{"schema":{"$ref":"#/components/schemas/BorrowHistoryDTO"}}}},"404":{"description":"Borrow history not found or already returned","content":{"application/json;charset=UTF-8":{"schema":{"$ref":"#/components/schemas/BorrowHistoryDTO"}}}}}}},"/api/borrow-history/borrow":{"post":{"tags":["Borrow History Controller"],"summary":"Borrow a book","description":"Allows a user to borrow a book if available and eligible","operationId":"borrowBook","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BorrowRequestDTO"}},"application/xml":{"schema":{"$ref":"#/components/schemas/BorrowRequestDTO"}}},"required":true},"responses":{"201":{"description":"Book successfully borrowed","content":{"application/json;charset=UTF-8":{"schema":{"$ref":"#/components/schemas/BorrowHistoryDTO"}}}},"400":{"description":"Book is not available","content":{"application/json;charset=UTF-8":{"schema":{"$ref":"#/components/schemas/BorrowHistoryDTO"}}}},"406":{"description":"User not eligible","content":{"application/json;charset=UTF-8":{"schema":{"$ref":"#/components/schemas/BorrowHistoryDTO"}}}}}}},"/api/books/search":{"post":{"tags":["Book Controller"],"summary":"Search books with filters and pagination","operationId":"searchBooks","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SearchBookRequest"}},"application/xml":{"schema":{"$ref":"#/components/schemas/SearchBookRequest"}}},"required":true},"responses":{"200":{"description":"Books retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookPageResponseDTO"}}}},"400":{"description":"Invalid request parameters","content":{"application/json":{"schema":{"type":"string","example":{"message":"Invalid request parameters"}}}}},"500":{"description":"Internal server error","content":{"application/json":{"schema":{"type":"string","example":{"message":"Internal server error"}}}}}}}},"/api/books/add":{"post":{"tags":["Book Controller"],"summary":"Add book","description":"Add a new book to the library","operationId":"addBook","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateBookRequest"}},"application/xml":{"schema":{"$ref":"#/components/schemas/CreateBookRequest"}}},"required":true},"responses":{"201":{"description":"Book successfully added","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookDTO"}}}},"400":{"description":"Invalid input data","content":{"application/json":{"schema":{"type":"string","example":{"message":"Invalid data"}}}}}}}},"/api/auth/login":{"post":{"tags":["Auth Controller"],"operationId":"login","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AuthRequest"}},"application/xml":{"schema":{"$ref":"#/components/schemas/AuthRequest"}}},"required":true},"responses":{"200":{"description":"OK","content":{"application/json;charset=UTF-8":{"schema":{"type":"object"}}}}}}},"/api/users/{id}":{"get":{"tags":["User Controller"],"summary":"Get user by ID","description":"Retrieves detailed information of a user by their ID.","operationId":"getUserById","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"User found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDTO"}}}},"404":{"description":"User not found","content":{"application/json":{"schema":{"type":"string","example":{"message":"User not found"}}}}}}}},"/api/borrow-history":{"get":{"tags":["Borrow History Controller"],"summary":"Get all borrowing history","description":"Returns borrowing history for all users (for librarians)","operationId":"getAllBorrowHistory","responses":{"200":{"description":"Borrow history retrieved","content":{"application/json;charset=UTF-8":{"schema":{"$ref":"#/components/schemas/BorrowHistoryDTO"}}}}}}},"/api/borrow-history/user":{"get":{"tags":["Borrow History Controller"],"summary":"Get borrowing history for a user","description":"Returns the complete borrowing history for the given user ID","operationId":"getUserBorrowHistory","responses":{"200":{"description":"Borrow history retrieved","content":{"application/json;charset=UTF-8":{"schema":{"$ref":"#/components/schemas/BorrowHistoryDTO"}}}}}}},"/api/borrow-history/report/overdue":{"get":{"tags":["Borrow History Controller"],"summary":"Generate overdue books report","description":"Generates a report of all books that are overdue with user and book details","operationId":"generateOverdueReport","responses":{"200":{"description":"Report successfully generated","content":{"text/plain":{}}}}}},"/api/books/{id}":{"get":{"tags":["Book Controller"],"summary":"Get book details by ID","operationId":"getBookById","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Book found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookDTO"}}}},"404":{"description":"Book not found","content":{"application/json":{"schema":{"type":"string","example":{"message":"Book not found with the given ID"}}}}}}}},"/api/users/delete/{id}":{"delete":{"tags":["User Controller"],"summary":"Soft delete user by ID","description":"Performs a soft delete (marks user as deleted) instead of physically removing them from the database.","operationId":"deleteUser","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"User successfully deleted","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UserDTO"}}}},"404":{"description":"User not found","content":{"application/json":{"schema":{"type":"string","example":{"message":"User not found"}}}}}}}},"/api/books/delete/{id}":{"delete":{"tags":["Book Controller"],"summary":"Soft delete a book","operationId":"deleteBook","parameters":[{"name":"id","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"Book successfully deleted","content":{"application/json":{"schema":{"$ref":"#/components/schemas/BookDTO"}}}},"404":{"description":"Book not found","content":{"application/json":{"schema":{"type":"string","example":{"message":"Book not found"}}}}},"400":{"description":"Book already deleted","content":{"application/json":{"schema":{"type":"string","example":{"message":"Book already deleted"}}}}}}}}},"components":{"schemas":{"UpdateUserRequest":{"type":"object","properties":{"name":{"type":"string","description":"Full name of the user","example":"John Doe","maxLength":50,"minLength":0},"email":{"type":"string","description":"Email address of the user","example":"john.doe@example.com","maxLength":100,"minLength":0},"username":{"type":"string","description":"Unique username for login","example":"johndoe","maxLength":20,"minLength":0},"role":{"type":"string","description":"Role of the user (e.g., LIBRARIAN, PATRON)","example":"PATRON"},"userStatus":{"type":"string","description":"Status of the user (e.g., ACTIVE, DELETED)","example":"ACTIVE"}}},"UserDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64","description":"Unique identifier of the user","example":1},"name":{"type":"string","description":"Full name of the user","example":"John Doe"},"username":{"type":"string","description":"Username used for login","example":"johndoe"},"email":{"type":"string","description":"Email address of the user","example":"john.doe@example.com"},"role":{"type":"string","description":"Role of the user","enum":["LIBRARIAN","PATRON"],"example":"PATRON"},"userStatus":{"type":"string","description":"Status of the user","enum":["ACTIVE","DELETED"],"example":"ACTIVE"}}},"UpdateBookRequest":{"type":"object","description":"Request object for updating a book","properties":{"title":{"type":"string","description":"Book title","example":"The Great Gatsby","maxLength":255,"minLength":0},"author":{"type":"string","description":"Author name","example":"F. Scott Fitzgerald","maxLength":100,"minLength":0},"isbn":{"type":"string","description":"ISBN code","example":9780141182636,"maxLength":20,"minLength":0},"publicationDate":{"type":"string","format":"date","description":"Publication date","example":"1925-04-10"},"genre":{"type":"string","description":"Genre of the book","enum":["FICTION","NON_FICTION","SCIENCE_FICTION","FANTASY","ROMANCE","MYSTERY","THRILLER","BIOGRAPHY","HISTORY","CHILDREN","YOUNG_ADULT","CLASSIC","DYSTOPIA","TECHNICAL"],"example":"FICTION"}}},"BookDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64","description":"Id of the book","example":12},"title":{"type":"string","description":"Title of the book","example":"The Great Gatsby","maxLength":255},"author":{"type":"string","description":"Author of the book","example":"F. Scott Fitzgerald","maxLength":100},"isbn":{"type":"string","description":"ISBN of the book","example":9780743273565,"maxLength":20},"publicationDate":{"type":"string","description":"Publication date of the book","example":"1925-04-10"},"genre":{"type":"string","description":"Genre of the book","example":"FICTION"},"bookStatus":{"type":"string","description":"Status of the book","example":"ACTIVE"}}},"RegisterUserRequest":{"type":"object","properties":{"name":{"type":"string","description":"Full name of the user","example":"John Doe","maxLength":255,"minLength":0},"username":{"type":"string","description":"Username to be used for login","example":"johndoe","maxLength":100,"minLength":0},"email":{"type":"string","description":"Email address of the user","example":"john.doe@example.com","maxLength":254,"minLength":0},"password":{"type":"string","description":"Password of the user","example":"securePassword123","maxLength":20,"minLength":0},"role":{"type":"string","description":"Role of the user","enum":["PATRON","LIBRARIAN"],"example":"PATRON"}},"required":["email","name","password","role","username"]},"BorrowHistoryDTO":{"type":"object","description":"Borrow history record with user and book details","properties":{"id":{"type":"integer","format":"int64","description":"Unique ID of the borrow history record","example":101},"userId":{"type":"integer","format":"int64","description":"ID of the user who borrowed the book","example":12},"bookId":{"type":"integer","format":"int64","description":"ID of the borrowed book","example":45},"userName":{"type":"string","description":"Name of the user","example":"Jane Doe"},"bookTitle":{"type":"string","description":"Title of the borrowed book","example":"Clean Code"},"borrowDate":{"type":"string","format":"date","description":"Date when the book was borrowed","example":"2025-05-01"},"dueDate":{"type":"string","format":"date","description":"Due date for returning the book","example":"2025-05-15"},"returnDate":{"type":"string","format":"date","description":"Date when the book was returned, if returned","example":"2025-05-10"},"isReturned":{"type":"boolean","description":"Whether the book has been returned or not","example":false}}},"ReturnRequestDTO":{"type":"object","properties":{"returnDate":{"type":"string","format":"date","description":"The date when the book is returned","example":"2025-05-05"}},"required":["returnDate"]},"BorrowRequestDTO":{"type":"object","properties":{"bookId":{"type":"integer","format":"int64","description":"ID of the book to borrow","example":5},"borrowDate":{"type":"string","format":"date","description":"Date the book was borrowed","example":"2025-05-05"},"dueDate":{"type":"string","format":"date","description":"Due date to return the book","example":"2025-05-15"}},"required":["bookId","borrowDate","dueDate"]},"SearchBookRequest":{"type":"object","properties":{"title":{"type":"string","description":"Title of the book","example":"Effective Java"},"author":{"type":"string","description":"Author of the book","example":"Joshua Bloch"},"isbn":{"type":"string","description":"ISBN number of the book","example":"978-0134685991"},"genre":{"type":"string","description":"Genre of the book","example":"FICTION"},"fromPublicationDate":{"type":"string","format":"date","description":"Start of the publication date range","example":"2001-01-01"},"toPublicationDate":{"type":"string","format":"date","description":"End of the publication date range","example":"2021-12-31"},"page":{"type":"integer","format":"int32","description":"Page number for pagination","example":0},"size":{"type":"integer","format":"int32","description":"Page size for pagination","example":10}}},"BookPageResponseDTO":{"type":"object","description":"Paginated response for books","properties":{"books":{"type":"array","description":"List of books for current page","items":{"$ref":"#/components/schemas/BookDTO"}},"totalElements":{"type":"integer","format":"int64","description":"Total number of books"},"totalPages":{"type":"integer","format":"int32","description":"Total number of pages"},"page":{"type":"integer","format":"int32","description":"Current page number (zero-based)"},"size":{"type":"integer","format":"int32","description":"Number of elements per page"}}},"CreateBookRequest":{"type":"object","properties":{"title":{"type":"string","description":"Title of the book","example":"The Great Gatsby","maxLength":255,"minLength":0},"author":{"type":"string","description":"Author of the book","example":"F. Scott Fitzgerald","maxLength":100,"minLength":0},"isbn":{"type":"string","description":"ISBN of the book","example":9784507,"maxLength":20,"minLength":0},"publicationDate":{"type":"string","format":"date","description":"Publication date of the book","example":"1925-04-10"},"genre":{"type":"string","description":"Genre of the book","enum":["FICTION","NON_FICTION","SCIENCE_FICTION","FANTASY","ROMANCE","MYSTERY","THRILLER","BIOGRAPHY","HISTORY","CHILDREN","YOUNG_ADULT","CLASSIC","DYSTOPIA","TECHNICAL"],"example":"FICTION"}},"required":["author","genre","isbn","publicationDate","title"]},"AuthRequest":{"type":"object","properties":{"username":{"type":"string"},"password":{"type":"string"}}}},"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}}}}